<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cosmic Diary: A Day in the Universe</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      background: black;
      color: #fff;
      overflow-x: hidden;
    }
    header {
      text-align: center;
      padding: 2rem;
      background: rgba(0, 0, 30, 0.9);
      box-shadow: 0 2px 10px #0ff3;
      z-index: 10;
      position: relative;
    }
    .container {
      padding: 2rem;
      max-width: 800px;
      margin: auto;
      position: relative;
      z-index: 10;
    }
    canvas#galaxy {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
    }
    .datepicker { margin: 1rem 0; width: 100%; }
    #apod {
      margin-top: 2rem;
      text-align: center;
    }
    #apod img, #apod iframe {
      max-width: 100%;
      border-radius: 10px;
      box-shadow: 0 0 20px #0ff3;
    }
    .loader {
      border: 6px solid #333;
      border-top: 6px solid #0ff;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 1rem auto;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    button {
      padding: 0.5rem 1rem;
      background: #0ff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-family: 'Orbitron', sans-serif;
      margin: 0.5rem 0.5rem 0 0;
    }
    @media screen and (max-width: 600px) {
      .container { padding: 1rem; }
      input[type="date"], button { width: 100%; margin-top: 10px; }
    }

    #evaToggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #0ff;
      color: black;
      border: none;
      padding: 12px;
      border-radius: 50%;
      box-shadow: 0 0 10px #0ffb;
      cursor: pointer;
      z-index: 1001;
    }
    #evaChat {
      position: fixed;
      bottom: 80px;
      right: 20px;
      background: #111122;
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 0 15px #0ff5;
      width: 280px;
      display: none;
      z-index: 1000;
    }
    #evaMessages {
      height: 180px;
      overflow-y: auto;
      padding: 10px;
      font-size: 0.95rem;
      line-height: 1.6;
      background-color: #1c1c2c;
      border-radius: 10px;
      box-shadow: inset 0 0 10px #00e5ff33;
      color: white;
    }
     #evaInput {
      width: 100%;
      margin-top: 0.5rem;
      padding: 0.5rem;
      border-radius: 6px;
      border: none;
    }
    #quiz-container {
      background: #111122;
      margin-top: 2rem;
      padding: 1rem;
      border-radius: 10px;
    }
    #streak {
      margin-top: 2rem;
      text-align: center;
      font-size: 1.1rem;
      color: #0ff;
    }
    #funFactBox {
      margin-top: 1.5rem;
      background: #1a1a2e;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 0 10px #0ff3;
    }
    #funFact {
      margin-top: 1rem;
      color: #0ff;
    }
  </style>
</head>
<body>
  <canvas id="galaxy"></canvas>

  <header>
    <h1>🌌 Cosmic Diary: A Day in the Universe 🌠</h1>
    <p>Discover what happened in space on your special day!</p>
  </header>

  <div class="container">
    <label for="date">Select a date (Your Cosmic Birthday 👽):</label>
    <input type="date" id="date" class="datepicker" />
    <button onclick="fetchAPOD()">Search</button>
    <button onclick="toggleVoice()">🔈 Voice On/Off</button>
    <button onclick="goBackToMain()" id="backBtn" style="display:none;">Back</button>
    <div class="loader" id="loader" style="display:none;"></div>
    <div id="apod"></div>

    <div id="quiz-container">
      <h3>🌠 Space Quiz</h3>
      <p id="question">Loading question...</p>
      <input type="text" id="answer" placeholder="Your answer..." />
      <button onclick="checkAnswer()">Submit</button>
      <p id="quiz-result"></p>
    </div>
    <div id="streak"></div>

    <div id="funFactBox">
      <button onclick="showFunFact()">✨ Show Random Fun Fact</button>
      <p id="funFact"></p>
    </div>
  </div>

  <button id="evaToggle" onclick="toggleEva()">🛰️</button>
  <div id="evaChat">
    <strong style="color:#0ff">E.V.A. – AI Space Assistant</strong>
    <div id="evaMessages"></div>
    <input type="text" id="evaInput" placeholder="Ask me something..." onkeydown="if(event.key==='Enter') evaSend()">
  </div>
  <script>

   let synth = window.speechSynthesis;
let voices = [];
let isSpeakingPaused = false;

// Load available voices early
function loadVoices() {
  voices = synth.getVoices();
  if (voices.length === 0) {
    synth.onvoiceschanged = () => {
      voices = synth.getVoices();
    };
  }
}

loadVoices(); // 👈 Call it right after declaring the function

function speak(text) {
  if (isSpeakingPaused || !text) return;

  const cleanedText = text.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|[\uD83C-\uDBFF\uDC00-\uDFFF]|\p{Emoji_Presentation}|\p{Extended_Pictographic})/gu, '');

  const utterance = new SpeechSynthesisUtterance(cleanedText);

  const selectedVoice = voices.find(v =>
    v.name.includes("Google UK English Male") ||
    v.name.includes("Microsoft Zira") ||
    v.name.includes("Google US English")
  );

  if (selectedVoice) {
    utterance.voice = selectedVoice;
  }

  utterance.rate = 0.88;
  utterance.pitch = 0.7;
  utterance.volume = 1;

  if (synth.speaking || synth.pending) {
    synth.cancel();
  }

  setTimeout(() => {
    synth.speak(utterance);
  }, 250);
}
function toggleVoice() {
  if (synth.speaking && !synth.paused) {
    synth.pause();
    isSpeakingPaused = true;
  } else if (synth.paused) {
    synth.resume();
    isSpeakingPaused = false;
  }
}

    // 3D Galaxy Background with Three.js
    document.addEventListener("DOMContentLoaded", () => {
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById("galaxy"), alpha: true });
      renderer.setSize(window.innerWidth, window.innerHeight);

      const starGeometry = new THREE.BufferGeometry();
      const starMaterial = new THREE.PointsMaterial({ color: 0xffffff });
      const starVertices = [];
      for (let i = 0; i < 10000; i++) {
        const x = (Math.random() - 0.5) * 2000;
        const y = (Math.random() - 0.5) * 2000;
        const z = (Math.random() - 0.5) * 2000;
        starVertices.push(x, y, z);
      }
      starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
      const stars = new THREE.Points(starGeometry, starMaterial);
      scene.add(stars);
      camera.position.z = 1;

      function animate() {
        requestAnimationFrame(animate);
        stars.rotation.x += 0.0005;
        stars.rotation.y += 0.0005;
        renderer.render(scene, camera);
      }
      animate();
    });
    
    // EVA Assistant 
    function toggleEva() {
      const eva = document.getElementById("evaChat");
      eva.style.display = eva.style.display === "none" ? "block" : "none";
    }

    const input = document.getElementById("evaInput");
    const messages = document.getElementById("evaMessages");

    function evaSend() {
      const msg = input.value.trim();
      if (!msg) return;
      messages.innerHTML += `<div style='margin-bottom:12px'><strong style='color:#00e5ff'>You:</strong><p>${msg}</p></div>`;
      let reply = "Hmm... I'm still learning that!";
      if (msg.toLowerCase().includes("july 20, 1969")) reply = "Apollo 11 moon landing day! 🌕";
      else if (msg.toLowerCase().includes("moons")) reply = "Jupiter used to lead, but Saturn currently has the most confirmed moons! 🪐";
      else if (msg.toLowerCase().includes("red planet")) reply = "Mars is known as the Red Planet due to its iron oxide-rich surface. 🔴";
      else if (msg.toLowerCase().includes("largest planet")) reply = "Jupiter is the largest planet in our solar system! 🌟";
      else if (msg.toLowerCase().includes("closest star")) reply = "The closest star to Earth is the Sun. 🌞";
      else if (msg.toLowerCase().includes("light year")) reply = "A light year is the distance light travels in one year—about 9.46 trillion kilometers! 🌌";
      else if (msg.toLowerCase().includes("galaxy")) reply = "We live in the Milky Way galaxy! 🌌";
      else if (msg.toLowerCase().includes("black hole")) reply = "A black hole is a region of space where gravity is so strong that not even light can escape it. 🕳";
      else if (msg.toLowerCase().includes("biggest moon")) reply = "Ganymede, a moon of Jupiter, is the largest moon in the solar system. 🌕";
      else if (msg.toLowerCase().includes("sun made of")) reply = "The Sun is mostly made of hydrogen and helium. ☀";
      else if (msg.toLowerCase().includes("nebula")) reply = "A nebula is a giant cloud of dust and gas where stars are born. 🌠";
      else if (msg.toLowerCase().includes("pluto")) reply = "Pluto was reclassified as a dwarf planet in 2006. ❄";
      else if (msg.toLowerCase().includes("comet")) reply = "Comets are icy bodies that release gas and dust, forming glowing tails. ☄";
      else if (msg.toLowerCase().includes("asteroid belt")) reply = "The asteroid belt is between Mars and Jupiter, filled with rocky debris. 🪨";
      else if (msg.toLowerCase().includes("gravity")) reply = "Gravity is the force that attracts two bodies toward each other. 🌍⬇";
      else if (msg.toLowerCase().includes("satellite")) reply = "A satellite is any object that orbits another—natural or artificial. 🛰";
      else if (msg.toLowerCase().includes("eclipse")) reply = "An eclipse happens when one celestial body moves into the shadow of another. 🌑🌞";
      else if (msg.toLowerCase().includes("apollo")) reply = "Apollo 11 was the mission that landed the first humans on the Moon in 1969. 👨‍🚀";
      else if (msg.toLowerCase().includes("telescope")) reply = "A telescope is used to observe distant objects in space. 🔭";
      else if (msg.toLowerCase().includes("exoplanet")) reply = "An exoplanet is a planet that orbits a star outside our solar system. 🌍⭐";
      else if (msg.toLowerCase().includes("orbit")) reply = "Orbit is the curved path of a celestial object around another due to gravity. 🛰";
      else if (msg.toLowerCase().includes("supernova")) reply = "A supernova is a powerful explosion that occurs when a massive star dies. 💥";
      else if (msg.toLowerCase().includes("milky way")) reply = "The Milky Way is the spiral galaxy that contains our solar system. 🌌";
      else if (msg.toLowerCase().includes("venus")) reply = "Venus is the hottest planet in the solar system due to its thick CO₂ atmosphere. 🔥";
      else if (msg.toLowerCase().includes("mars")) reply = "Mars has the largest volcano in the solar system—Olympus Mons. 🏔";
      else if (msg.toLowerCase().includes("uranus")) reply = "Uranus rotates on its side, unlike any other planet! 🌀";
      else if (msg.toLowerCase().includes("neptune")) reply = "Neptune is the farthest planet from the Sun and has supersonic winds. 🌊";
      else if (msg.toLowerCase().includes("rings")) reply = "Saturn is famous for its stunning ring system. 💍";
      else if (msg.toLowerCase().includes("sunspots")) reply = "Sunspots are cooler, darker regions on the Sun’s surface caused by magnetic activity. 🌞";
      else if (msg.toLowerCase().includes("space station")) reply = "The International Space Station is a lab orbiting Earth, shared by multiple countries. 🛰";
      else if (msg.toLowerCase().includes("rover")) reply = "NASA's Perseverance rover is currently exploring Mars! 🤖";
      else if (msg.toLowerCase().includes("meteor shower")) reply = "Meteor showers occur when Earth passes through a comet's debris trail. 🌠";
      else if (msg.toLowerCase().includes("day on jupiter")) reply = "A day on Jupiter lasts about 9.9 hours—super fast! ⏱";
      else if (msg.toLowerCase().includes("mercury")) reply = "Mercury is the closest planet to the Sun and has no atmosphere. 🌡";
      else if (msg.toLowerCase().includes("lunar eclipse")) reply = "A lunar eclipse occurs when Earth casts its shadow on the Moon. 🌒";
      else if (msg.toLowerCase().includes("solar eclipse")) reply = "A solar eclipse occurs when the Moon blocks the Sun's light. 🌗";
      else if (msg.toLowerCase().includes("shooting star")) reply = "A shooting star is actually a meteor burning up in Earth’s atmosphere. 🌠";
      else if (msg.toLowerCase().includes("rotation of earth")) reply = "Earth rotates once every 24 hours, causing day and night. 🌍🕰";
      else if (msg.toLowerCase().includes("revolution of earth")) reply = "Earth revolves around the Sun in about 365.25 days. ☀🌍";
      else if (msg.toLowerCase().includes("does moon have gravity")) reply = "Yes, the Moon has gravity—about 1/6th of Earth’s gravity. 🌕";
      else if (msg.toLowerCase().includes("how many planets")) reply = "There are 8 planets in our solar system. 🪐";
      else if (msg.toLowerCase().includes("dwarf planet")) reply = "Dwarf planets like Pluto are small, round, and orbit the Sun but don't clear their orbit. 🪐";
      else if (msg.toLowerCase().includes("rings of uranus")) reply = "Yes, Uranus has faint rings made of dark particles. 🌑";
      else if (msg.toLowerCase().includes("olympus mons")) reply = "Olympus Mons is the tallest volcano in the solar system, located on Mars. 🗻";
      else if (msg.toLowerCase().includes("great red spot")) reply = "The Great Red Spot is a massive storm on Jupiter that’s lasted over 300 years. 🌪";
      else if (msg.toLowerCase().includes("moon phases")) reply = "The Moon’s phases are caused by its changing position relative to Earth and the Sun. 🌒🌓🌕";
      else if (msg.toLowerCase().includes("age of universe")) reply = "The universe is about 13.8 billion years old. 🌌";
      else if (msg.toLowerCase().includes("solar flare")) reply = "A solar flare is a sudden eruption of energy on the Sun’s surface. 🌞⚡";
      else if (msg.toLowerCase().includes("lunar surface")) reply = "The lunar surface is dusty, rocky, and full of craters. 🌕";
      else if (msg.toLowerCase().includes("life on mars")) reply = "No confirmed life has been found on Mars, but scientists are still searching! 🔬";
      else if (msg.toLowerCase().includes("does sun move")) reply = "Yes, the Sun orbits the center of the Milky Way galaxy. 🌞➡";
      else if (msg.toLowerCase().includes("space vacuum")) reply = "Space is a vacuum—no air, just emptiness and radiation. 🚀🌌";
      else if (msg.toLowerCase().includes("escape velocity")) reply = "Escape velocity is the speed needed to break free from a celestial body's gravity. 🚀";
      else if (msg.toLowerCase().includes("satellite examples")) reply = "The Moon is a natural satellite; GPS and weather satellites are artificial ones. 🛰";
      else if (msg.toLowerCase().includes("spaceship")) reply = "Spaceships are designed to travel in space, like NASA’s Orion or SpaceX’s Starship. 🚀";
      else if (msg.toLowerCase().includes("sun temperature")) reply = "The Sun’s surface is around 5,500°C, but its core is over 15 million°C! ☀🔥";
      else if (msg.toLowerCase().includes("how stars form")) reply = "Stars form in nebulae when gravity pulls gas and dust together. 🌠";
      else if (msg.toLowerCase().includes("binary black hole")) reply = "A binary black hole is a pair of black holes orbiting each other. 🔄🕳";
      else if (msg.toLowerCase().includes("does sun rotate")) reply = "Yes! The Sun rotates on its axis every 25 to 35 Earth days. ☀⏳";
      else if (msg.toLowerCase().includes("name of our galaxy")) reply = "Our galaxy is called the Milky Way. 🌌";
      else if (msg.toLowerCase().includes("distance to sun")) reply = "Earth is about 93 million miles (150 million km) from the Sun. ☀📏";
      else if (msg.toLowerCase().includes("space telescope")) reply = "Space telescopes like Hubble and James Webb capture stunning images of the universe. 🔭🛰";
      else if (msg.toLowerCase().includes("space probe")) reply = "Probes like Voyager travel deep into space to collect data. 🚀🛰";
      else if (msg.toLowerCase().includes("quasar")) reply = "A quasar is a very bright, active galactic nucleus powered by a supermassive black hole. ✨";
      else if (msg.toLowerCase().includes("interstellar space")) reply = "Interstellar space is the region beyond our solar system’s heliosphere. 🌌";
      else if (msg.toLowerCase().includes("james webb")) reply = "The James Webb Space Telescope can see deeper into space than ever before. 🔭🟡";
      else if (msg.toLowerCase().includes("multiverse")) reply = "The multiverse is a hypothetical concept of multiple or infinite universes. 🌌🌌";
      else if (msg.toLowerCase().includes("terraforming")) reply = "Terraforming means altering a planet’s environment to make it habitable. 🌍➡🌕";
      else if (msg.toLowerCase().includes("rover on mars")) reply = "Yes! NASA's Perseverance and Curiosity rovers are exploring Mars. 🚘🔴";
      else if (msg.toLowerCase().includes("mars color")) reply = "Mars looks red because of iron oxide (rust) on its surface. 🔴";
      else if (msg.toLowerCase().includes("does moon spin")) reply = "Yes, the Moon spins once per orbit, which is why we always see the same side. 🌕";
      else if (msg.toLowerCase().includes("how big is sun")) reply = "The Sun is about 1.39 million km wide—109 times Earth’s diameter! 🌞";
      else if (msg.toLowerCase().includes("can humans go to mars")) reply = "Humans haven't been to Mars yet, but missions are being planned! 👨‍🚀🚀";
      else if (msg.toLowerCase().includes("space junk")) reply = "Space junk is defunct satellites and debris orbiting Earth. 🛰💥";
      else if (msg.toLowerCase().includes("does space have sound")) reply = "Space has no sound because there's no air to carry vibrations. 🔇";
      else if (msg.toLowerCase().includes("how cold is space")) reply = "Outer space is about -270°C or 3K—just above absolute zero. ❄🧊";
      else if (msg.toLowerCase().includes("moon landing")) reply = "Neil Armstrong was the first human to walk on the Moon in 1969. 🌕👣";
      else if (msg.toLowerCase().includes("hubble")) reply = "The Hubble Space Telescope has captured some of the most detailed images of the universe. 📷";
      else if (msg.toLowerCase().includes("space travel")) reply = "Space travel requires overcoming gravity, radiation, and vacuum! 🚀";
      else if (msg.toLowerCase().includes("life in space")) reply = "Astronauts live on the ISS in microgravity, eating, sleeping, and working. 🧑‍🚀";
      else if (msg.toLowerCase().includes("big bang")) reply = "The Big Bang theory explains how the universe began about 13.8 billion years ago. 🌌";
      else if (msg.toLowerCase().includes("tides")) reply = "Ocean tides are caused by the Moon's gravity pulling on Earth's oceans. 🌊🌕";
      else if (msg.toLowerCase().includes("dark matter")) reply = "Dark matter is invisible material that makes up most of the universe's mass. 🌑";
      else if (msg.toLowerCase().includes("dark energy")) reply = "Dark energy is a mysterious force driving the accelerated expansion of the universe. ⚛";
      else if (msg.toLowerCase().includes("space suit")) reply = "A space suit protects astronauts from vacuum, radiation, and temperature extremes. 👨‍🚀";
      else if (msg.toLowerCase().includes("earth from space")) reply = "From space, Earth appears as a blue marble due to its oceans. 🌍";
      else if (msg.toLowerCase().includes("time on moon")) reply = "One day on the Moon (sunrise to sunrise) lasts about 29.5 Earth days. 🌓";
      else if (msg.toLowerCase().includes("age of sun")) reply = "The Sun is about 4.6 billion years old. ☀";
      else if (msg.toLowerCase().includes("future of sun")) reply = "The Sun will become a red giant and then a white dwarf in billions of years. 🔴⚪";
      else if (msg.toLowerCase().includes("alien life")) reply = "Scientists search for alien life via biosignatures and signals, but nothing confirmed yet. 👽";
      else if (msg.toLowerCase().includes("saturn")) reply = "Saturn is a gas giant known for its magnificent rings. 💫";
      else if (msg.toLowerCase().includes("constellations")) reply = "Constellations are patterns of stars named after mythological figures or animals. ✨";
      else if (msg.toLowerCase().includes("andromeda")) reply = "The Andromeda galaxy is the nearest major galaxy to the Milky Way. 🌌";
      else if (msg.toLowerCase().includes("sunrise on mars")) reply = "Sunrises on Mars appear blue due to fine dust in the atmosphere. 🌅";
      else if (msg.toLowerCase().includes("binary star")) reply = "A binary star system has two stars orbiting around a common center. 🌟🌟";
      else if (msg.toLowerCase().includes("kepler")) reply = "The Kepler telescope discovered thousands of exoplanets before retirement. 🔭";
      else if (msg.toLowerCase().includes("star death")) reply = "When stars die, they may become white dwarfs, neutron stars, or black holes. ⚰⭐";
      else if (msg.toLowerCase().includes("earth")) reply = "Earth is the only known planet with life. It’s about 71% water. 🌍";
      else if (msg.toLowerCase().includes("solar system")) reply = "Our solar system has 8 planets, 1 star, 5 dwarf planets, and many moons. 🌞🪐";
      else if (msg.toLowerCase().includes("event horizon")) reply = "The event horizon is the boundary around a black hole beyond which nothing escapes. 🕳";
      else if (msg.toLowerCase().includes("which planet has the most moons")) reply = "saturn";
      else if (msg.toLowerCase().includes("what galaxy do we live in")) reply = "milky way";
      else if (msg.toLowerCase().includes("who was the first person in space")) reply = "yuri gagarin";
      else if (msg.toLowerCase().includes("what is the hottest planet")) reply = "venus";
      else if (msg.toLowerCase().includes("what is the red planet")) reply = "mars";
      else if (msg.toLowerCase().includes("which planet is closest to the sun")) reply = "mercury";
      else if (msg.toLowerCase().includes("which planet is known for its rings")) reply = "saturn";
      else if (msg.toLowerCase().includes("name the only moon with a thick atmosphere")) reply = "titan";else if (msg.toLowerCase().includes("moon")) reply = "Earth has one natural satellite: the Moon. 🌙";
      else if (msg.toLowerCase().includes("ganymede")) reply = "Ganymede is the largest moon in the solar system, and it orbits Jupiter. 🌕";
      else if (msg.toLowerCase().includes("planet discovered last")) reply = "Neptune was the last planet to be discovered, in 1846. 🔭";
      else if (msg.toLowerCase().includes("life on venus")) reply = "Venus is too hot and acidic for life as we know it. 🌡";
      else if (msg.toLowerCase().includes("does mercury have atmosphere")) reply = "Mercury has a very thin exosphere, not a real atmosphere. 💨";
      else if (msg.toLowerCase().includes("gravity on jupiter")) reply = "Jupiter's gravity is 2.5 times stronger than Earth's! ⚖";
      else if (msg.toLowerCase().includes("moon vs mercury")) reply = "Mercury is bigger than Earth's moon but has similar surface features. 🌑";
      else if (msg.toLowerCase().includes("earth rotation time")) reply = "Earth completes one rotation every 24 hours. 🌍🕒";
      else if (msg.toLowerCase().includes("venus day length")) reply = "One day on Venus is 243 Earth days long. 🕰";
      else if (msg.toLowerCase().includes("why is mars red")) reply = "Mars is red because of iron oxide (rust) on its surface. 🔴";
      else if (msg.toLowerCase().includes("clouds on venus")) reply = "Venus has thick clouds made of sulfuric acid. ☁☣";
      else if (msg.toLowerCase().includes("earth water percentage")) reply = "About 71% of Earth's surface is covered in water. 🌊";
      else if (msg.toLowerCase().includes("planet with blue color")) reply = "Neptune appears blue due to methane in its atmosphere. 💙";
      else if (msg.toLowerCase().includes("saturn density")) reply = "Saturn is the least dense planet—it would float in water! 🛶";
      else if (msg.toLowerCase().includes("rings made of")) reply = "Planetary rings are made of ice, dust, and rock fragments. 💫";
      else if (msg.toLowerCase().includes("how many earths fit in jupiter")) reply = "Over 1,300 Earths could fit inside Jupiter! 🌍➡🌕";
      else if (msg.toLowerCase().includes("earth age")) reply = "Earth is about 4.54 billion years old. 🌍🧓";
      else if (msg.toLowerCase().includes("why is uranus blue")) reply = "Uranus is blue due to methane in its upper atmosphere. 🔵";
      else if (msg.toLowerCase().includes("planet with extreme seasons")) reply = "Uranus has extreme seasons due to its axial tilt. ❄☀";
      else if (msg.toLowerCase().includes("is neptune windy")) reply = "Yes! Neptune has the fastest winds in the solar system. 💨🌬";
      else if (msg.toLowerCase().includes("which planet has rings")) reply = "All gas giants—Jupiter, Saturn, Uranus, and Neptune—have rings. 💍";
      else if (msg.toLowerCase().includes("can we walk on jupiter")) reply = "No, Jupiter is a gas giant—you can’t walk on it. ☁🚫";
      else if (msg.toLowerCase().includes("why is venus bright")) reply = "Venus reflects sunlight well due to its thick cloud cover. ✨";
      else if (msg.toLowerCase().includes("planet with volcanoes")) reply = "Mars and Venus both have volcanoes. Olympus Mons on Mars is the largest! 🌋";
      else if (msg.toLowerCase().includes("planet with canyon")) reply = "Mars has Valles Marineris—the largest canyon in the solar system. 🏞";
      else if (msg.toLowerCase().includes("can we live on venus")) reply = "Venus is too hot and toxic for human life. ☣";
      else if (msg.toLowerCase().includes("most massive planet")) reply = "Jupiter is the most massive planet in the solar system. ⚖";
      else if (msg.toLowerCase().includes("is earth unique")) reply = "Yes! Earth is the only planet known to support life. 🌍🌱";
      else if (msg.toLowerCase().includes("which planet spins fastest")) reply = "Jupiter spins fastest—about 9.9 hours per day. 🕘";
      else if (msg.toLowerCase().includes("do planets glow")) reply = "Planets reflect sunlight—they don’t produce their own light. 🌞➡🪐";
      else if (msg.toLowerCase().includes("planet density")) reply = "Earth is the densest planet in the solar system. 🧱";
      else if (msg.toLowerCase().includes("has any planet been destroyed")) reply = "Not in our solar system, but some exoplanets are torn apart by stars. 🌠";
      else if (msg.toLowerCase().includes("planet named after god")) reply = "Most planets are named after Roman gods. 🏛";
      else if (msg.toLowerCase().includes("planet discovered with telescope")) reply = "Uranus was the first planet discovered with a telescope in 1781. 🔭";
      else if (msg.toLowerCase().includes("earth moon ratio")) reply = "The Moon is about 1/4th the size of Earth. 🌕";
      else if (msg.toLowerCase().includes("can we terraform mars")) reply = "It's a big challenge, but some scientists think it's possible in the future. 🏗🔴";
      else if (msg.toLowerCase().includes("planets made of gas")) reply = "Jupiter and Saturn are mostly made of hydrogen and helium. 💨";
      else if (msg.toLowerCase().includes("planets made of ice")) reply = "Uranus and Neptune are ice giants with water, methane, and ammonia. ❄";
      else if (msg.toLowerCase().includes("planet rotation direction")) reply = "Most planets rotate counterclockwise; Venus and Uranus rotate differently. 🔄";
      else if (msg.toLowerCase().includes("venus pressure")) reply = "Venus's surface pressure is 92 times that of Earth’s—like being deep in the ocean! 🌊";
      else if (msg.toLowerCase().includes("planet with auroras")) reply = "Earth, Jupiter, Saturn, Uranus, and Neptune all have auroras. 🌌";
      else if (msg.toLowerCase().includes("why mercury no atmosphere")) reply = "Mercury’s gravity is too weak to hold an atmosphere. 🌫";
      else if (msg.toLowerCase().includes("gas giants have core")) reply = "Yes, gas giants are thought to have small, rocky cores. 🔽";
      else if (msg.toLowerCase().includes("venus vs earth")) reply = "Venus is similar in size to Earth but much hotter and toxic. ♀🌍";
      else if (msg.toLowerCase().includes("planets outside solar system")) reply = "Yes, they’re called exoplanets—thousands have been discovered! 🪐🔭";
      else if (msg.toLowerCase().includes("what is a planet")) reply = "A planet orbits a star, is spherical, and clears its orbital path. 🌐";
      else if (msg.toLowerCase().includes("planetary migration")) reply = "Planetary migration means planets can move from their original orbits over time. ↪";
      else if (msg.toLowerCase().includes("jupiter great red spot")) reply = "The Great Red Spot is a giant storm bigger than Earth, lasting centuries! 🌪";
      else if (msg.toLowerCase().includes("earth core")) reply = "Earth’s core is solid iron and nickel surrounded by molten metal. 🌍🔥";
      else if (msg.toLowerCase().includes("how long sunlight reach earth")) reply = "Sunlight takes about 8 minutes and 20 seconds to reach Earth. ☀➡🌍";
      else if (msg.toLowerCase().includes("sun")) reply = "The Sun is a G-type main-sequence star at the center of our solar system. ☀️";
      else if (msg.toLowerCase().includes("milky way")) reply = "The Milky Way is our home galaxy, containing over 100 billion stars!";
      else if (msg.toLowerCase().includes("black hole")) reply = "A black hole is a region of space where gravity is so strong that not even light can escape.";
      else if (msg.toLowerCase().includes("mars")) reply = "Mars is known as the Red Planet due to iron oxide (rust) on its surface. 🟥";
      else if (msg.toLowerCase().includes("venus")) reply = "Venus is the hottest planet in our solar system, even hotter than Mercury!";
      else if (msg.toLowerCase().includes("light year")) reply = "A light year is the distance light travels in one year: about 9.46 trillion kilometers.";
      else if (msg.toLowerCase().includes("big bang")) reply = "The Big Bang theory describes the origin of the universe from a singularity about 13.8 billion years ago.";
      else if (msg.toLowerCase().includes("galaxy")) reply = "A galaxy is a massive collection of stars, planets, gas, and dark matter bound together by gravity.";
      else if (msg.toLowerCase().includes("telescope")) reply = "Telescopes help us observe distant objects in space using lenses or mirrors.";
      else if (msg.toLowerCase().includes("eclipse")) reply = "An eclipse happens when one celestial body moves into the shadow of another, like solar and lunar eclipses.";
      else if (msg.toLowerCase().includes("nebula")) reply = "A nebula is a vast cloud of dust and gas in space, often the birthplace of stars.";
      else if (msg.toLowerCase().includes("bonus tip")) reply = "🌟 Bonus Tip: Did you know Neptune has the strongest winds in the solar system—up to 2,100 km/h?";
      else if (msg.toLowerCase().includes("saturn")) reply = "Saturn is famous for its beautiful ring system and has more than 140 moons!";
      else if (msg.toLowerCase().includes("pluto")) reply = "Pluto is a dwarf planet in the Kuiper Belt. It was once considered the ninth planet.";       
      else if (msg.toLowerCase().includes("how many planets")) reply = "There are 8 planets in our solar system. 🌍";
      else if (msg.toLowerCase().includes("smallest planet")) reply = "Mercury is the smallest planet in our solar system. 🪐";
      else if (msg.toLowerCase().includes("largest planet")) reply = "Jupiter is the largest planet in our solar system! 🌟";
      else if (msg.toLowerCase().includes("hottest planet")) reply = "Venus is the hottest due to its thick atmosphere. 🔥";
      else if (msg.toLowerCase().includes("coldest planet")) reply = "Uranus is the coldest planet in the solar system. ❄";
      else if (msg.toLowerCase().includes("earth")) reply = "Earth is a terrestrial planet with a solid surface and an atmosphere. 🌎";
      else if (msg.toLowerCase().includes("jupiter")) reply = "Jupiter is a gas giant made mostly of hydrogen and helium. ☁";
      else if (msg.toLowerCase().includes("saturn")) reply = "Saturn is a gas giant, famous for its rings. 💍";
      else if (msg.toLowerCase().includes("uranus")) reply = "Uranus is an ice giant with a tilted axis. 🌀";
      else if (msg.toLowerCase().includes("neptune")) reply = "Neptune is an ice giant known for its blue color and storms. 🌊";
      else if (msg.toLowerCase().includes("venus" )) reply = "Venus is a terrestrial planet with a thick carbon dioxide atmosphere. 🌫";
      else if (msg.toLowerCase().includes("mars")) reply = "Mars is a rocky planet with iron-rich dust. 🔴";
      else if (msg.toLowerCase().includes("mercury")) reply = "Mercury is a rocky, cratered planet with no atmosphere. 🌕";
      else if (msg.toLowerCase().includes("pluto planet")) reply = "Pluto is a dwarf planet, not a full planet anymore. ❄";
      else if (msg.toLowerCase().includes("gas giant")) reply = "Jupiter and Saturn are gas giants—huge, with thick atmospheres. ☁";
      else if (msg.toLowerCase().includes("ice giant")) reply = "Uranus and Neptune are ice giants, with icy compositions. ❄";
      else if (msg.toLowerCase().includes("terrestrial planet")) reply = "Mercury, Venus, Earth, and Mars are terrestrial planets. 🌍";
      else if (msg.toLowerCase().includes("planet with most moons")) reply = "Saturn has the most confirmed moons in our solar system. 🪐";
      else if (msg.toLowerCase().includes("planet with no moon")) reply = "Mercury and Venus have no moons. 🌑";
      else if (msg.toLowerCase().includes("planet with life")) reply = "Earth is the only known planet with life. 🌱";
      else if (msg.toLowerCase().includes("planet with rings")) reply = "All gas giants have rings, but Saturn's are the most visible. 💍";
      else if (msg.toLowerCase().includes("fastest orbit")) reply = "Mercury orbits the Sun the fastest—just 88 Earth days! 🕘";
      else if (msg.toLowerCase().includes("slowest orbit")) reply = "Neptune takes 165 Earth years to orbit the Sun. 🌀";
      else if (msg.toLowerCase().includes("shortest day")) reply = "Jupiter has the shortest day—about 9.9 hours! ⏱";
      else if (msg.toLowerCase().includes("longest day")) reply = "Venus has the longest day—one day is longer than its year! 🕰";
      else if (msg.toLowerCase().includes("planet color")) reply = "Planets vary in color—Mars is red, Neptune is blue, Venus is yellowish. 🎨";
      else if (msg.toLowerCase().includes("planet distances")) reply = "Planets get farther apart as you go out from the Sun. 🧭";
      else if (msg.toLowerCase().includes("planet order")) reply = "Mercury, Venus, Earth, Mars, Jupiter, Saturn, Uranus, Neptune. 🪐";
      else if (msg.toLowerCase().includes("earth atmosphere")) reply = "Earth’s atmosphere contains nitrogen, oxygen, and trace gases. 💨";
      else if (msg.toLowerCase().includes("venus atmosphere")) reply = "Venus has a thick CO₂ atmosphere causing extreme greenhouse effect. 🫧";
      else if (msg.toLowerCase().includes("mars atmosphere")) reply = "Mars has a thin CO₂ atmosphere—not breathable. 🌫";
      else if (msg.toLowerCase().includes("jupiter atmosphere")) reply = "Jupiter’s atmosphere has bands of clouds and massive storms. 🌪";
      else if (msg.toLowerCase().includes("neptune wind")) reply = "Neptune has the fastest winds in the solar system—up to 2,100 km/h! 💨";
      else if (msg.toLowerCase().includes("uranus tilt")) reply = "Uranus is tilted on its side—98 degrees! 🌀";
      else if (msg.toLowerCase().includes("surface of mercury")) reply = "Mercury has a cratered surface like our Moon. 🌕";
      else if (msg.toLowerCase().includes("surface of mars")) reply = "Mars has volcanoes, valleys, and dusty plains. 🔴";
      else if (msg.toLowerCase().includes("surface of venus")) reply = "Venus has mountains, volcanoes, and extreme heat. 🔥";
      else if (msg.toLowerCase().includes("can we live on mars")) reply = "Not yet, but scientists are exploring the possibility! 🚀";
      else if (msg.toLowerCase().includes("planet with water")) reply = "Earth is the only planet with liquid surface water. 🌊";
      else if (msg.toLowerCase().includes("jupiter storms")) reply = "Jupiter is covered in storms, including the Great Red Spot. 🌪";
      else if (msg.toLowerCase().includes("planets with magnetic fields")) reply = "Earth, Jupiter, Saturn, Uranus, and Neptune have magnetic fields. 🧲";
      else if (msg.toLowerCase().includes("planet rotation")) reply = "Planets spin on their axes, creating day and night. ⏳";
      else if (msg.toLowerCase().includes("planet revolution")) reply = "Planets orbit the Sun due to gravity. 🌞";
      else if (msg.toLowerCase().includes("weight on planets")) reply = "Weight varies by gravity—less on Mars, more on Jupiter. ⚖";
      else if (msg.toLowerCase().includes("planet size comparison")) reply = "Jupiter is over 1,300 times larger than Earth! 🌍➡🌐";
      else if (msg.toLowerCase().includes("moon of earth")) reply = "Earth has one moon—commonly just called 'the Moon'. 🌕";
      else if (msg.toLowerCase().includes("martian year")) reply = "A year on Mars is about 687 Earth days. 🗓";
      else if (msg.toLowerCase().includes("venus retrograde")) reply = "Venus spins in the opposite direction to most planets. 🔄";
      else if (msg.toLowerCase().includes("mars moons")) reply = "Mars has two tiny moons—Phobos and Deimos. 🌑";
      else if (msg.toLowerCase().includes("name the only moon with a thick atmosphere")) reply = "titan";
      else if (msg.toLowerCase().includes("which planet has the most moons")) reply = "saturn";
      else if (msg.toLowerCase().includes("what galaxy do we live in")) reply = "milky way";
      else if (msg.toLowerCase().includes("who was the first person in space")) reply = "yuri gagarin";
      else if (msg.toLowerCase().includes("what is the hottest planet")) reply = "venus";
      else if (msg.toLowerCase().includes("what is the red planet")) reply = "mars";
      else if (msg.toLowerCase().includes("which planet is closest to the sun")) reply = "mercury";
      else if (msg.toLowerCase().includes("which planet is known for its rings")) reply = "saturn";
      else if (msg.toLowerCase().includes("which planet is the largest in our solar system")) reply = "jupiter";
      else if (msg.toLowerCase().includes("what is earth's only natural satellite")) reply = "moon";
      else if (msg.toLowerCase().includes("what is a giant storm on jupiter called")) reply = "great red spot";
      else if (msg.toLowerCase().includes("which planet is tilted on its side")) reply = "uranus";
      else if (msg.toLowerCase().includes("which planet has the strongest winds")) reply = "neptune";
      else if (msg.toLowerCase().includes("what is the smallest planet in our solar system")) reply = "mercury";
      else if (msg.toLowerCase().includes("which planet is known as earth’s twin")) reply = "venus";
      else if (msg.toLowerCase().includes("which planet is farthest from the sun")) reply = "neptune";
      else if (msg.toLowerCase().includes("what is the name of our star")) reply = "sun";
      else if (msg.toLowerCase().includes("what is the coldest planet in our solar system")) reply = "uranus";
      else if (msg.toLowerCase().includes("what is the name of mars’s largest volcano")) reply = "olympus mons";
      else if (msg.toLowerCase().includes("which planet spins the fastest")) reply = "jupiter";
      else if (msg.toLowerCase().includes("which planet is called the morning star")) reply = "venus";
      else if (msg.toLowerCase().includes("which planet has the longest day")) reply = "venus";
      else if (msg.toLowerCase().includes("which planet has two moons called phobos and deimos")) reply = "mars";
      else if (msg.toLowerCase().includes("what planet would float in water")) reply = "saturn";
      else if (msg.toLowerCase().includes("which planet reflects the most sunlight")) reply = "venus";
      else if (msg.toLowerCase().includes("which planet has blue color due to methane")) reply = "neptune";
      else if (msg.toLowerCase().includes("jupiter moons")) reply = "Jupiter has over 90 known moons, including Ganymede! 🌙";
      else if (msg.toLowerCase().includes("saturn moons")) reply = "Saturn has more than 140 confirmed moons! 🪐";
      else if (msg.toLowerCase().includes("uranus moons")) reply = "Uranus has 27 known moons, many named after Shakespeare characters. 🎭";
      else if (msg.toLowerCase().includes("neptune moons")) reply = "Neptune’s largest moon is Triton, which orbits backward! 🌘";
      else if (msg.toLowerCase().includes("magnetosphere")) reply = "Earth’s magnetosphere protects us from solar wind and cosmic radiation. 🧲🌍";
      messages.innerHTML += `<div style='margin-bottom:16px'><strong style='color:#0ff'>EVA:</strong><p>${reply}</p></div>`;
      speak(reply);
      input.value = "";
      messages.scrollTop = messages.scrollHeight;
    }

    // Streak (auto-reset if user misses a day)
const streakEl = document.getElementById("streak");
const today = new Date();
const todayStr = today.toDateString();

const lastVisitStr = localStorage.getItem("lastVisit");
let streak = parseInt(localStorage.getItem("streak")) || 0;

if (lastVisitStr !== todayStr) {
  if (lastVisitStr) {
    const lastVisit = new Date(lastVisitStr);
    const diffDays = Math.floor((today - lastVisit) / (1000 * 60 * 60 * 24));

    if (diffDays === 1) {
      // Consecutive day: continue streak
      streak++;
    } else {
      // Missed a day: reset streak
      streak = 1;
    }
  } else {
    // First visit ever
    streak = 1;
  }

  localStorage.setItem("streak", streak);
  localStorage.setItem("lastVisit", todayStr);
}

streakEl.innerHTML = `🌠 Cosmic Streak: ${streak} day(s)`;

    // Fun Facts
    function showFunFact() {
      const facts = [
        "A day on Venus is longer than a year on Venus!",
        "Neutron stars can spin 600 times per second.",
        "There’s a giant cloud of alcohol in space.",
        "One spoonful of a neutron star weighs about a billion tons!",
        "The Milky Way is on a collision course with Andromeda.",
        "The Moon is drifting away 3.8 cm every year.",
        "Titan, Saturn’s moon, has lakes of liquid methane.",
        "Jupiter’s Red Spot is a 300-year-old storm.",
        "Space is silent — no air, no sound.",
        "Metal pieces in space can weld themselves!"
      ];
      const randomFact = facts[Math.floor(Math.random() * facts.length)];
      document.getElementById("funFact").innerText = randomFact;
      speak(randomFact);
    }

function fetchAPOD() {
  if (!hasSpokenGreeting) {
    speak("Greetings, explorer. Your cosmic diary is ready.");
    hasSpokenGreeting = true;
  }

  const date = document.getElementById("date").value;
  if (!date) return;
  document.getElementById("loader").style.display = "block";
  document.getElementById("apod").innerHTML = "";

  fetch(`https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&date=${date}`)
    .then(res => res.json())
    .then(data => {
      const apod = document.getElementById("apod");
      if (data.media_type === "image") {
        apod.innerHTML = `<h2>${data.title}</h2><img src="${data.url}" /><p>${data.explanation}</p>`;
      } else {
        apod.innerHTML = `<h2>${data.title}</h2><iframe src="${data.url}" frameborder="0" allowfullscreen></iframe><p>${data.explanation}</p>`;
      }
      speak(data.title + ". " + data.explanation);
      document.getElementById("backBtn").style.display = "inline-block";
    })
    .catch(() => document.getElementById("apod").innerHTML = "<p>Failed to load APOD.</p>")
    .finally(() => document.getElementById("loader").style.display = "none");
}
function goBackToMain() {
  if (synth.speaking) synth.cancel();
  document.getElementById("apod").innerHTML = "";
  document.getElementById("date").value = "";
  document.getElementById("backBtn").style.display = "none";
}
    // Quiz 

    const quizBank = [
      { q: "Which planet has the most moons?", a: "saturn" }, 
      { q: "What galaxy do we live in?", a: "milky way" },
      { q: "Who was the first person in space?", a: "yuri gagarin" },
      { q: "Which planet has the most moons?", a: "saturn" },
      { q: "What galaxy do we live in?", a: "milky way" },
      { q: "Who was the first person in space?", a: "yuri gagarin" },
      { q: "What is the hottest planet?", a: "venus" },
      { q: "What is the red planet?", a: "mars" },
      { q: "Which planet is closest to the sun?", a: "mercury" },
      { q: "Which planet is known for its rings?", a: "saturn" },
      { q: "Which planet is the largest in our solar system?", a: "jupiter" },
      { q: "What is Earth's only natural satellite?", a: "moon" },
      { q: "What is a giant storm on Jupiter called?", a: "great red spot" },
      { q: "Which planet is tilted on its side?", a: "uranus" },
      { q: "Which planet has the strongest winds?", a: "neptune" },
      { q: "What is the smallest planet in our solar system?", a: "mercury" },
      { q: "Which planet is farthest from the Sun?", a: "neptune" },
      { q: "What is the name of our star?", a: "sun" },
      { q: "What is the coldest planet in our solar system?", a: "uranus" },
      { q: "What is the name of Mars’s largest volcano?", a: "olympus mons" },
      { q: "Which planet spins the fastest?", a: "jupiter" },
      { q: "Which planet is called the morning star?", a: "venus" },
      { q: "Which planet has the longest day?", a: "venus" },
      { q: "Which planet has two moons called Phobos and Deimos?", a: "mars" },
      { q: "What planet would float in water?", a: "saturn" },
      { q: "Which planet reflects the most sunlight?", a: "venus" },
      { q: "Which planet has blue color due to methane?", a: "neptune" },
      { q: "Name the only moon with a thick atmosphere.", a: "titan" },
      { q: "What is the hottest planet?", a: "venus" },
      { q: "What is the red planet?", a: "mars" },
      { q: "Which planet is closest to the sun?", a: "mercury" },
      { q: "Which planet is known for its rings?", a: "saturn" },
      { q: "Name the only moon with a thick atmosphere.", a: "titan" }
    ];

    let currentQuiz = {};

    function loadRandomQuestion() {
      currentQuiz = quizBank[Math.floor(Math.random() * quizBank.length)];
      document.getElementById("question").innerText = currentQuiz.q;
      document.getElementById("answer").value = "";
      document.getElementById("quiz-result").innerText = "";
    }

    function checkAnswer() {
      const answer = document.getElementById("answer").value.toLowerCase();
      const result = document.getElementById("quiz-result");
      if (answer.includes(currentQuiz.a)) {
        result.innerHTML = "✅ Correct! You've unlocked a secret entry! 🌟";
        setTimeout(loadRandomQuestion, 1500);
      } else {
        result.innerHTML = "❌ Oops! That's not quite right. Try again!";
      }
    }

    loadRandomQuestion();

  // Trigger EVA Greeting on First Interaction
let hasSpokenGreeting = false;

function triggerGreeting() {
  if (!hasSpokenGreeting) {
    speak("Greetings, explorer. Your cosmic diary is ready.");
    hasSpokenGreeting = true;

    // Remove listeners to avoid repeated greetings
    document.removeEventListener("click", triggerGreeting);
    document.removeEventListener("keydown", triggerGreeting);
    document.removeEventListener("scroll", triggerGreeting);
  }
}

document.addEventListener("click", triggerGreeting);
document.addEventListener("keydown", triggerGreeting);
document.addEventListener("scroll", triggerGreeting);

window.onload = () => {
  loadVoices();
};

  </script>
</body>
</html>
